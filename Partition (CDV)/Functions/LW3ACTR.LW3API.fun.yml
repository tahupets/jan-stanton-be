Function:
  Enabled For RDMLX:  No

  Source: |
    * =======================================================
    * Process Name - LW3API
    * Process Description - CE API functions
    * Function Name - LW3ACTR
    * Function Description - Country API
    
    * EXCHANGE FIELDS(In)
    
    * #FXACTION  - Action code - G = Get specific country master
    * .                          L = Get list of countries
    * #LW3CTRY - Country code
    
    
    * EXCHANGE FIELDS(Out)
    
    * #FXRETCD  - Return code - OK or NR
    * Returns list #CTRYLIST
    
    * =======================================================
    * Summary of Changes
    * =======================================================
    * CR #  !  Date   ! Description
    * -------------------------------------------------------
    *       |         |
    * =======================================================
    Function Options(*DIRECT) Rcv_List(#CTRYLIST)
    * =======================================================
    
    Group_By Name(#CNTRYGRP) Fields(#LW3CTRY #LW3CTRYD #LW3UFLG)
    
    Def_List Name(#CTRYLIST) Fields(#LW3CTRY #LW3CTRYD) Type(*WORKING) Entrys(200)
    
    * =======================================================
    * Program main line
    * =======================================================
    
    Change Field(#LW3CTRYD) To(*NULL)
    Change Field(#FXRETCD) To(NR)
    Exchange Fields(#FXRETCD) Option(*ALWAYS)
    Clr_List Named(#CTRYLIST)
    
    Case Of_Field(#FXACTION)
    
    When Value_Is('*EQ ''L''')
    
    Select Fields(#CNTRYGRP) From_File(LW3CTRYF) With_Key(*LANGUAGE) Io_Error(*NEXT) Val_Error(*NEXT)
    If_Status Is(*OKAY)
    If Cond('#LW3UFLG *NE ''N''')
    Add_Entry To_List(#CTRYLIST)
    Change Field(#FXRETCD) To(OK)
    Endif
    Endif
    Endselect
    
    Otherwise
    
    Fetch Fields(#CNTRYGRP) From_File(LW3CTRYF) With_Key(*LANGUAGE #LW3CTRY) Io_Error(*NEXT) Val_Error(*NEXT)
    If_Status Is(*OKAY)
    If Cond('#LW3UFLG *NE ''N''')
    Change Field(#FXRETCD) To(OK)
    Add_Entry To_List(#CTRYLIST)
    Endif
    Endif
    
    Endcase
    
    Return
    
